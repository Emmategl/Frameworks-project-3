{"ast":null,"code":"var _jsxFileName = \"/Users/emmateglbraender/Documents/ITU/2semester/Frameworks and Architectures for the Web/Mini projects/Mini project 3/hot_liquids/src/Components/BasketContext.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef, useState } from \"react\";\n/* export const BasketContext = React.createContext([[], () => {}]); */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const BasketContext = /*#__PURE__*/React.createContext([[]]);\nexport const BasketProvider = ({\n  children\n}) => {\n  _s();\n\n  const [cartItems, setCartItems] = useState([]);\n  const itemsRef = useRef(cartItems);\n  itemsRef.current = cartItems;\n  React.useEffect(() => {\n    fetch('http://localhost:3000/customers/1/basketDetails').then(response => response.json()).then(cartItems => {\n      setCartItems(cartItems);\n    });\n  }, [cartItems]);\n  return /*#__PURE__*/_jsxDEV(BasketContext.Provider, {\n    value: useCallback(item => {\n      setItems([...itemsRef.current, item]);\n    }, []),\n    children: /*#__PURE__*/_jsxDEV(RemoveCartContext.Provider, {\n      value: useCallback(item => {\n        const newItems = itemsRef.current.filter(_item => _item.id !== item.id);\n        setItems(newItems);\n      }, []),\n      children: /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n        value: items,\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 9\n  }, this);\n};\n\n_s(BasketProvider, \"j6EY06TYcgoumZ9whUPEPrrh0sg=\");\n\n_c = BasketProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"BasketProvider\");","map":{"version":3,"sources":["/Users/emmateglbraender/Documents/ITU/2semester/Frameworks and Architectures for the Web/Mini projects/Mini project 3/hot_liquids/src/Components/BasketContext.tsx"],"names":["React","useCallback","useRef","useState","BasketContext","createContext","BasketProvider","children","cartItems","setCartItems","itemsRef","current","useEffect","fetch","then","response","json","item","setItems","newItems","filter","_item","id","items"],"mappings":";;;AAEA,OAAOA,KAAP,IAA+BC,WAA/B,EAA4CC,MAA5C,EAAoDC,QAApD,QAAoE,OAApE;AAEA;;;AACA,OAAO,MAAMC,aAAa,gBAAGJ,KAAK,CAACK,aAAN,CAAoB,CAAC,EAAD,CAApB,CAAtB;AAEP,OAAO,MAAMC,cAAc,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAAA;;AAC5C,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BN,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAMO,QAAQ,GAAGR,MAAM,CAACM,SAAD,CAAvB;AACAE,EAAAA,QAAQ,CAACC,OAAT,GAAmBH,SAAnB;AACAR,EAAAA,KAAK,CAACY,SAAN,CAAgB,MAAM;AACpBC,IAAAA,KAAK,CAAC,iDAAD,CAAL,CACGC,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EADtB,EAEGF,IAFH,CAESN,SAAD,IAAe;AACnBC,MAAAA,YAAY,CAACD,SAAD,CAAZ;AACD,KAJH;AAKD,GAND,EAMG,CAACA,SAAD,CANH;AAQA,sBACI,QAAC,aAAD,CAAe,QAAf;AACA,IAAA,KAAK,EAAEP,WAAW,CAACgB,IAAI,IAAI;AACzBC,MAAAA,QAAQ,CAAC,CAAC,GAAGR,QAAQ,CAACC,OAAb,EAAsBM,IAAtB,CAAD,CAAR;AACD,KAFiB,EAEf,EAFe,CADlB;AAAA,2BAKA,QAAC,iBAAD,CAAmB,QAAnB;AACE,MAAA,KAAK,EAAEhB,WAAW,CAACgB,IAAI,IAAI;AACzB,cAAME,QAAQ,GAAGT,QAAQ,CAACC,OAAT,CAAiBS,MAAjB,CACfC,KAAK,IAAIA,KAAK,CAACC,EAAN,KAAaL,IAAI,CAACK,EADZ,CAAjB;AAGAJ,QAAAA,QAAQ,CAACC,QAAD,CAAR;AACD,OALiB,EAKf,EALe,CADpB;AAAA,6BAQE,QAAC,WAAD,CAAa,QAAb;AAAsB,QAAA,KAAK,EAAEI,KAA7B;AAAA,kBAAqChB;AAArC;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA;AALA;AAAA;AAAA;AAAA;AAAA,UADJ;AAkBD,CA9BI;;GAAMD,c;;KAAAA,c","sourcesContent":["import { useQuery } from \"react-query\";\nimport { CartItemType } from \"./allproducts\";\nimport React, { createContext, useCallback, useRef, useState } from \"react\";\n\n/* export const BasketContext = React.createContext([[], () => {}]); */\nexport const BasketContext = React.createContext([[]]);\n\nexport const BasketProvider = ({ children }) => {\n    const [cartItems, setCartItems] = useState([] as CartItemType[]);\n    const itemsRef = useRef(cartItems);\n    itemsRef.current = cartItems;\n    React.useEffect(() => {\n      fetch('http://localhost:3000/customers/1/basketDetails')\n        .then((response) => response.json())\n        .then((cartItems) => {\n          setCartItems(cartItems);\n        })\n    }, [cartItems]);\n  \n    return (\n        <BasketContext.Provider\n        value={useCallback(item => {\n          setItems([...itemsRef.current, item]);\n        }, [])}\n      >\n        <RemoveCartContext.Provider\n          value={useCallback(item => {\n            const newItems = itemsRef.current.filter(\n              _item => _item.id !== item.id\n            );\n            setItems(newItems);\n          }, [])}\n        >\n          <CartContext.Provider value={items}>{children}</CartContext.Provider>\n        </RemoveCartContext.Provider>\n      </BasketContext.Provider>\n    );\n  };\n  \n  \n"]},"metadata":{},"sourceType":"module"}